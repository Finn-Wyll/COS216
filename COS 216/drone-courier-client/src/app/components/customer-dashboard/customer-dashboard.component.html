<!-- src/app/components/customer-dashboard/customer-dashboard.component.html -->

<div class="dashboard-container">
  <header class="dashboard-header">
    <h1>Drone Courier System</h1>
    <div class="user-info">
      <span>Welcome, {{ userName }} ({{ userType }})</span>
      <button class="logout-button" (click)="logout()">Logout</button>
    </div>
  </header>

  <div class="dashboard-content">
    <nav class="dashboard-nav">
      <ul>
        <li><a routerLink="/dashboard" routerLinkActive="active">Dashboard</a></li>
        <li><a routerLink="/orders" routerLinkActive="active">View Orders</a></li>
      </ul>
    </nav>

    <main class="dashboard-main">
      <section class="dashboard-summary">
        <h2>Dashboard</h2>
        <p>Welcome to the Drone Courier System. You can view your orders and request deliveries.</p>
        <div class="dashboard-actions">
          <a routerLink="/orders" class="action-button">View My Orders</a>
        </div>
      </section>

      <section class="map-container">
        <h3>Live Drone Tracking</h3>
        <div class="map-wrapper">
          <app-map 
            [centerLatitude]="-25.7545" 
            [centerLongitude]="28.2314"
            [dronePosition]="dronePosition"
            [dustDevils]="dustDevils"
          ></app-map>
        </div>
        <div *ngIf="dronePosition" class="drone-info">
          <p><strong>Drone Position:</strong> [{{ dronePosition.latitude.toFixed(4) }}, {{ dronePosition.longitude.toFixed(4) }}]</p>
          <p><strong>Altitude:</strong> {{ dronePosition.altitude }} meters</p>
        </div>
        <div *ngIf="!dronePosition" class="no-drone-info">
          <p>No active drone deliveries at the moment.</p>
        </div>
      </section>

      <section class="notifications">
        <h3>Recent Notifications</h3>
        <div *ngIf="notifications.length === 0" class="empty-notifications">
          No notifications yet
        </div>
        <ul *ngIf="notifications.length > 0" class="notification-list">
          <li *ngFor="let notification of notifications" class="notification-item">
            {{ notification }}
          </li>
        </ul>
      </section>
    </main>
  </div>
</div>